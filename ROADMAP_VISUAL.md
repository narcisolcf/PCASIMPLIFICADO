# üó∫Ô∏è ROADMAP VISUAL - PCA CAMOCIM

## üìä Status Atual vs MVP Proposto

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     C√ìDIGO ATUAL (GITHUB)                        ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚úÖ Frontend: React + TypeScript + Shadcn-ui                     ‚îÇ
‚îÇ  ‚úÖ Backend: Supabase (PostgreSQL + Auth + Storage)              ‚îÇ
‚îÇ  ‚úÖ 13 Tabelas SQL (756 linhas)                                  ‚îÇ
‚îÇ  ‚úÖ 40+ Componentes UI                                           ‚îÇ
‚îÇ  ‚úÖ 12 P√°ginas Funcionais                                        ‚îÇ
‚îÇ  ‚úÖ 6 Hooks Customizados                                         ‚îÇ
‚îÇ  ‚úÖ Autentica√ß√£o + RLS                                           ‚îÇ
‚îÇ  ‚úÖ CRUD Completo: UASGs, √Åreas, DFDs, Cat√°logo                 ‚îÇ
‚îÇ  ‚ö†Ô∏è Em Desenvolvimento: Forma√ß√£o PCA, Aprova√ß√£o, Consolida√ß√£o   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              VS
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       MVP PROPOSTO (PROMPT)                      ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  üìã Frontend: React + TypeScript + Componentes Customizados      ‚îÇ
‚îÇ  üìã Backend: Express.js + Google Drive API                       ‚îÇ
‚îÇ  üìã Sem Banco de Dados Relacional                                ‚îÇ
‚îÇ  üìã 4 Componentes UI B√°sicos                                     ‚îÇ
‚îÇ  üìã 2 P√°ginas: Formul√°rio + Cadastro                             ‚îÇ
‚îÇ  üìã 1 Hook Simples                                               ‚îÇ
‚îÇ  ‚ùå Sem Autentica√ß√£o                                             ‚îÇ
‚îÇ  üìã Funcionalidades: Formul√°rio PCA + Cadastro Unidades          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ DECIS√ÉO ESTRAT√âGICA

### ‚úÖ CEN√ÅRIO RECOMENDADO: Adicionar MVP ao Sistema Atual

```
C√ìDIGO ATUAL (Preservar)  +  FEATURES MVP (Adicionar)  =  SISTEMA COMPLETO
      100%                         10-15%                     110-115%
```

**Por qu√™?**
- ‚úÖ Preserva trabalho de meses
- ‚úÖ Arquitetura superior (Supabase > Express + Drive)
- ‚úÖ Adiciona funcionalidades sem perder nada
- ‚úÖ Menor risco, maior retorno

---

## üìÖ CRONOGRAMA DE IMPLEMENTA√á√ÉO

### üü¢ FASE 1: Prepara√ß√£o (Semana 1)
```
Dura√ß√£o: 5 dias
Esfor√ßo: 1 desenvolvedor

[‚úì] Revisar relat√≥rio comparativo
[‚úì] Decis√£o de arquitetura
[‚úì] Criar issues no GitHub
[‚úì] Setup de ambiente
[‚úì] Definir prioridades
```

---

### üü° FASE 2: Core do MVP (Semanas 2-3)
```
Dura√ß√£o: 10 dias
Esfor√ßo: 1-2 desenvolvedores

üìÅ src/hooks/
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] useFormularioPCA.ts (0%)
  ‚îú‚îÄ Valida√ß√µes de formul√°rio
  ‚îú‚îÄ Estado local-first
  ‚îú‚îÄ Integra√ß√£o com Supabase
  ‚îî‚îÄ Handlers de envio

üìÅ src/components/formulario/
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] DadosRequisitante.tsx (0%)
  ‚îú‚îÄ Select de Unidade Gestora
  ‚îú‚îÄ Campos de respons√°vel
  ‚îî‚îÄ Valida√ß√µes em tempo real

[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] ItemContratacao.tsx (0%)
  ‚îú‚îÄ Adapta√ß√£o de MateriaisServicos.tsx
  ‚îú‚îÄ Tipos: Material, Servi√ßo, Obra, Eng.
  ‚îú‚îÄ Prioridade e data pretendida
  ‚îî‚îÄ C√°lculos autom√°ticos

[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] FormularioPCA.tsx (0%)
  ‚îú‚îÄ Orquestra√ß√£o de componentes
  ‚îú‚îÄ Fluxo de envio
  ‚îî‚îÄ Feedback ao usu√°rio
```

---

### üü† FASE 3: Integra√ß√£o (Semana 4)
```
Dura√ß√£o: 5 dias
Esfor√ßo: 1 desenvolvedor

üìÅ supabase/migrations/
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] add_pca_fields.sql (0%)
  ‚îú‚îÄ ALTER TABLE materiais_servicos
  ‚îÇ   ‚îú‚îÄ ADD prioridade (Alta, M√©dia, Baixa)
  ‚îÇ   ‚îú‚îÄ ADD data_pretendida DATE
  ‚îÇ   ‚îî‚îÄ MODIFY tipo ENUM (+Obra, +Servi√ßo Eng.)
  ‚îî‚îÄ CREATE TABLE requisicoes_pca (opcional)

üìÅ src/pages/
[‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] FormacaoPCA.tsx (20% atual ‚Üí 100%)
  ‚îú‚îÄ Integrar FormularioPCA
  ‚îú‚îÄ Listagem de requisi√ß√µes
  ‚îî‚îÄ Filtros e busca

üìÅ src/utils/
[‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] exportDFDtoPDF.ts (40% ‚Üí adaptar para PCA)
  ‚îú‚îÄ Formato PCA vs DFD
  ‚îú‚îÄ Campos adicionais
  ‚îî‚îÄ Logo e cabe√ßalho Camocim
```

---

### üîµ FASE 4: Exporta√ß√£o e Armazenamento (Semana 5)
```
Dura√ß√£o: 5 dias
Esfor√ßo: 1 desenvolvedor

üìÅ src/utils/
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] exportPCAtoJSON.ts (0%)
  ‚îú‚îÄ Serializar dados do formul√°rio
  ‚îú‚îÄ Download autom√°tico
  ‚îî‚îÄ Preview antes de salvar

üî∂ OPCIONAL: Integra√ß√£o Google Drive
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] supabase/functions/sync-to-drive/ (0%)
  ‚îú‚îÄ Autentica√ß√£o Service Account
  ‚îú‚îÄ Criar pastas por unidade
  ‚îú‚îÄ Upload de PDF + JSON
  ‚îî‚îÄ Webhook de confirma√ß√£o
```

---

### üü£ FASE 5: Testes e Ajustes (Semana 6)
```
Dura√ß√£o: 5 dias
Esfor√ßo: 1-2 desenvolvedores

[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Testes unit√°rios (useFormularioPCA)
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Testes de integra√ß√£o (fluxo completo)
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Testes de valida√ß√£o (CPF, or√ßamento, etc)
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Testes de exporta√ß√£o (PDF, JSON)
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Corre√ß√µes de bugs
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Revis√£o de c√≥digo
```

---

### üü¢ FASE 6: Deploy (Semana 7)
```
Dura√ß√£o: 3 dias
Esfor√ßo: 1 desenvolvedor + DevOps

[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Deploy em staging
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Testes de aceita√ß√£o
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Documenta√ß√£o de usu√°rio
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Treinamento de usu√°rios
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Deploy em produ√ß√£o
[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] Monitoramento p√≥s-deploy
```

---

## üéØ ENTREGAS POR FASE

| Fase | Dura√ß√£o | Entreg√°vel Principal | Status |
|------|---------|---------------------|--------|
| 1 | 5 dias | Plano detalhado + Issues | üü¢ Pronto para iniciar |
| 2 | 10 dias | Hook + Componentes MVP | ‚ö™ Aguardando Fase 1 |
| 3 | 5 dias | Integra√ß√£o com sistema | ‚ö™ Aguardando Fase 2 |
| 4 | 5 dias | Exporta√ß√£o JSON/PDF | ‚ö™ Aguardando Fase 3 |
| 5 | 5 dias | Sistema testado | ‚ö™ Aguardando Fase 4 |
| 6 | 3 dias | Sistema em produ√ß√£o | ‚ö™ Aguardando Fase 5 |
| **TOTAL** | **33 dias** | **MVP integrado ao sistema** | **0% Completo** |

---

## üî• CONFLITOS CR√çTICOS

### CONFLITO #1: Arquitetura Backend
```diff
- MVP Proposto: Express.js + Google Drive
+ C√≥digo Atual: Supabase (PostgreSQL)
! Decis√£o: MANTER SUPABASE (superior)
```

### CONFLITO #2: Componentes UI
```diff
- MVP Proposto: Componentes customizados simples
+ C√≥digo Atual: Shadcn-ui (40+ componentes)
! Decis√£o: MANTER SHADCN-UI (acessibilidade)
```

### CONFLITO #3: Tipos de Item
```diff
- C√≥digo Atual: tipo ENUM ('Material', 'Servi√ßo')
+ MVP Proposto: tipo ENUM (+' Obra', +'Servi√ßo de Eng.')
! Solu√ß√£o: Migration para expandir ENUM
```

### CONFLITO #4: Campos Faltantes
```diff
- C√≥digo Atual: materiais_servicos sem prioridade/data_pretendida
+ MVP Proposto: ItemContratacao com esses campos
! Solu√ß√£o: Migration para adicionar campos
```

---

## üìä MATRIZ DE COMPATIBILIDADE

| Feature | Atual | MVP | A√ß√£o |
|---------|-------|-----|------|
| Cadastro Unidades | ‚úÖ Completo | ‚úÖ B√°sico | ‚úÖ Manter atual |
| Formul√°rio PCA | ‚ùå Ausente | ‚úÖ Proposto | üü¢ Implementar |
| Gest√£o Materiais | ‚úÖ Avan√ßado | ‚úÖ B√°sico | üü° Expandir |
| Exporta√ß√£o PDF | ‚úÖ Sim (DFD) | ‚úÖ Sim (PCA) | üü° Adaptar |
| Exporta√ß√£o JSON | ‚ùå N√£o | ‚úÖ Sim | üü¢ Implementar |
| Google Drive | ‚ùå N√£o | ‚úÖ Sim | üî∂ Opcional |
| Autentica√ß√£o | ‚úÖ Sim | ‚ùå N√£o | ‚úÖ Manter |
| Banco Dados | ‚úÖ PostgreSQL | ‚ùå Arquivos | ‚úÖ Manter |

**Legenda:**
- ‚úÖ Manter atual (j√° superior)
- üü¢ Implementar (feature nova)
- üü° Expandir (melhorar existente)
- üî∂ Opcional (avaliar necessidade)

---

## üöÄ QUICK START - Pr√≥ximos 3 Dias

### Dia 1: An√°lise
```bash
# 1. Clonar ou atualizar reposit√≥rio
git checkout -b feature/mvp-pca-integration

# 2. Revisar relat√≥rio completo
cat RELATORIO_COMPARATIVO_ROADMAP.md

# 3. Criar issues no GitHub
# Issue #1: Implementar useFormularioPCA.ts
# Issue #2: Criar componente DadosRequisitante.tsx
# Issue #3: Criar componente ItemContratacao.tsx
# Issue #4: Completar FormularioPCA.tsx
# Issue #5: Migration para novos campos
# Issue #6: Exporta√ß√£o JSON
```

### Dia 2: Setup
```bash
# 1. Criar estrutura de pastas
mkdir -p src/components/formulario
mkdir -p src/hooks/pca

# 2. Criar arquivos base
touch src/hooks/useFormularioPCA.ts
touch src/components/formulario/DadosRequisitante.tsx
touch src/components/formulario/ItemContratacao.tsx
touch src/components/formulario/FormularioPCA.tsx

# 3. Criar migration
npx supabase migration new add_pca_fields
```

### Dia 3: Primeiros Commits
```bash
# 1. Implementar useFormularioPCA (esqueleto)
# 2. Criar DadosRequisitante (estrutura b√°sica)
# 3. Commit inicial
git add .
git commit -m "feat: initialize MVP PCA integration - hooks and components structure"
```

---

## üìà KPIs de Sucesso

### M√©tricas T√©cnicas:
- [ ] 100% dos componentes do MVP implementados
- [ ] 0 regress√µes em funcionalidades existentes
- [ ] Cobertura de testes > 80%
- [ ] Performance: formul√°rio < 2s para salvar

### M√©tricas de Neg√≥cio:
- [ ] Formul√°rio PCA funcional
- [ ] Exporta√ß√£o PDF + JSON implementada
- [ ] Valida√ß√µes em conformidade com Lei 14.133/2021
- [ ] Usu√°rios conseguem criar requisi√ß√µes PCA

---

## üéì Recursos e Refer√™ncias

### Documenta√ß√£o:
- [C√≥digo Atual - PLANO_IMPLEMENTACAO_TABELAS.md](./PLANO_IMPLEMENTACAO_TABELAS.md)
- [Supabase Docs](https://supabase.com/docs)
- [Shadcn-ui Components](https://ui.shadcn.com/)
- [React Hook Form](https://react-hook-form.com/)

### Migrations Existentes:
```bash
ls supabase/migrations/
# 13 arquivos SQL (756 linhas total)
```

### Componentes Reutiliz√°veis:
```typescript
// J√° implementados e prontos para uso:
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Select } from "@/components/ui/select"
import { Textarea } from "@/components/ui/textarea"
import { Card } from "@/components/ui/card"
import { Dialog } from "@/components/ui/dialog"

// Hooks prontos:
import { useUASGs } from "@/hooks/useUASGs"
import { useAreasRequisitantes } from "@/hooks/useAreasRequisitantes"
import { useCatalogoItens } from "@/hooks/useCatalogoItens"
```

---

## ‚úÖ CHECKLIST FINAL PR√â-IMPLEMENTA√á√ÉO

- [ ] Relat√≥rio completo revisado e aprovado
- [ ] Cen√°rio 1 (recomendado) escolhido oficialmente
- [ ] Issues criadas no GitHub
- [ ] Branch `feature/mvp-pca-integration` criada
- [ ] Desenvolvedores alocados (1-2 pessoas)
- [ ] Prazo definido (33 dias √∫teis)
- [ ] Stakeholders alinhados
- [ ] Reuni√£o de kickoff agendada

---

**Status do Roadmap:** üü¢ PRONTO PARA INICIAR

**Pr√≥xima A√ß√£o:** Reuni√£o de aprova√ß√£o com stakeholders
